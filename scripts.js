
// Interactivity + simple i18n for Shape+ landing page
const i18n = {
  "pt-BR": {
    "nav.features":"Recursos","nav.how":"Como funciona","nav.pricing":"Planos","nav.download":"Baixar","nav.getApp":"Obter o app",
    "hero.title":"Perda de peso que cabe na sua rotina","hero.subtitle":"Planos personalizados, micro-hábitos e acompanhamento inteligente — sincronize com Apple Health ou Google Fit.","hero.ctaPrimary":"Baixar agora","hero.ctaSecondary":"Como funciona","hero.trust1":"✔ Personalização com base no seu histórico","hero.trust2":"✔ Integração com wearables","hero.trust3":"✔ Privacidade e segurança de dados",
    "features.title":"A ferramenta completa para perder peso","features.subtitle":"Recursos pensados para acompanhar suas metas — com ciência e simplicidade.",
    "features.personalized":"Plano personalizado","features.personalizedDesc":"Plano nutricional e metas baseadas em seus dados, com ajuste automático conforme você progride.",
    "features.microhabits":"Micro-hábitos","features.microhabitsDesc":"Hábitos diários fáceis de seguir que se acumulam em grandes resultados ao longo do tempo.",
    "features.quickLog":"Registro rápido de refeições","features.quickLogDesc":"Entrada rápida, scanner de código de barras e banco de dados de alimentos confiável.",
    "features.sync":"Sincronize com seus dispositivos","features.syncDesc":"Compatível com Apple Health, Google Fit e muitos wearables para métricas automáticas.",
    "features.progress":"Progresso visual","features.progressDesc":"Gráficos de peso, metas e coortes—fácil de entender o avanço.",
    "features.security":"Proteção de dados","features.securityDesc":"Criptografia, políticas claras de privacidade e opções para exportar/excluir seus dados.",
    "how.title":"Como funciona","how.step1":"<strong>Onboarding rápido:</strong> responda um pequeno questionário.","how.step2":"<strong>Plano inicial:</strong> calorias alvo e micro-hábitos.","how.step3":"<strong>Registre e sincronize:</strong> registre refeições ou conecte seu wearable.","how.step4":"<strong>Feedback diário:</strong> notificações e recomendações adaptativas.",
    "pricing.title":"Planos","pricing.subtitle":"Comece grátis. Atualize quando quiser.","pricing.free":"Grátis","pricing.free1":"Plano básico","pricing.free2":"Registro de refeições","pricing.free3":"Acompanhamento de peso","pricing.startFree":"Começar grátis",
    "pricing.premium":"Premium","pricing.premium1":"Tudo do Grátis","pricing.premium2":"Planos personalizados","pricing.premium3":"Sincronização avançada","pricing.subscribe":"Assinar Premium",
    "pricing.coaching":"Coaching","pricing.contact":"Sob consulta","pricing.coaching1":"Coach dedicado","pricing.coaching2":"Plano alimentar e treino","pricing.coaching3":"Sessões semanais","pricing.contactBtn":"Quero saber mais",
    "testimonials.title":"O que os usuários dizem",
    "download.title":"Pronto para começar?","download.subtitle":"Baixe o Shape+ e comece sua jornada de perda de peso sustentável — disponível para iOS e Android.","download.beta":"Prefere testar em beta? Inscreva-se aqui",
    "lead.title":"Receba o link de download","lead.send":"Enviar link","lead.note":"Enviaremos o link de download e novidades para o seu e-mail.",
    "modal.title":"Como deseja obter o app?","modal.subtitle":"Escolha sua plataforma — você será redirecionado para a loja correspondente ou receberá instruções para instalar o APK.",
    "footer.privacy":"Privacidade","footer.terms":"Termos","footer.contact":"Contato"
  },
  "en": {
    "nav.features":"Features","nav.how":"How it works","nav.pricing":"Pricing","nav.download":"Download","nav.getApp":"Get the app",
    "hero.title":"Weight loss that fits your routine","hero.subtitle":"Personalized plans, micro-habits and smart tracking — sync with Apple Health or Google Fit.","hero.ctaPrimary":"Download now","hero.ctaSecondary":"How it works","hero.trust1":"✔ Personalized based on your history","hero.trust2":"✔ Wearable integrations","hero.trust3":"✔ Data privacy and security",
    "features.title":"Everything you need to lose weight","features.subtitle":"Features designed to support your goals — with science and simplicity.",
    "features.personalized":"Personalized plan","features.personalizedDesc":"Nutrition plans and targets based on your data, automatically adjusting as you progress.",
    "features.microhabits":"Micro-habits","features.microhabitsDesc":"Daily easy-to-follow habits that add up to big results over time.",
    "features.quickLog":"Quick meal logging","features.quickLogDesc":"Fast entry, barcode scanner and a reliable food database.",
    "features.sync":"Sync with your devices","features.syncDesc":"Compatible with Apple Health, Google Fit and many wearables for automatic metrics.",
    "features.progress":"Visual progress","features.progressDesc":"Weight charts, goals and cohorts—easy to see progress.",
    "features.security":"Data protection","features.securityDesc":"Encryption, clear privacy policies and options to export/delete your data.",
    "how.title":"How it works","how.step1":"<strong>Quick onboarding:</strong> answer a short questionnaire.","how.step2":"<strong>Initial plan:</strong> calorie targets and micro-habits.","how.step3":"<strong>Log & sync:</strong> log meals or connect your wearable.","how.step4":"<strong>Daily feedback:</strong> notifications and adaptive recommendations.",
    "pricing.title":"Pricing","pricing.subtitle":"Start free. Upgrade anytime.","pricing.free":"Free","pricing.free1":"Basic plan","pricing.free2":"Meal logging","pricing.free3":"Weight tracking","pricing.startFree":"Start free",
    "pricing.premium":"Premium","pricing.premium1":"Everything in Free","pricing.premium2":"Personalized plans","pricing.premium3":"Advanced sync","pricing.subscribe":"Subscribe Premium",
    "pricing.coaching":"Coaching","pricing.contact":"Contact for pricing","pricing.coaching1":"Dedicated coach","pricing.coaching2":"Meal & training plan","pricing.coaching3":"Weekly sessions","pricing.contactBtn":"Tell me more",
    "testimonials.title":"What users say",
    "download.title":"Ready to get started?","download.subtitle":"Download Shape+ and start your sustainable weight-loss journey — available on iOS and Android.","download.beta":"Prefer beta? Sign up here",
    "lead.title":"Receive the download link","lead.send":"Send link","lead.note":"We'll send the download link and news to your email.",
    "modal.title":"How would you like to get the app?","modal.subtitle":"Choose your platform — you'll be redirected to the store or receive APK instructions.",
    "footer.privacy":"Privacy","footer.terms":"Terms","footer.contact":"Contact"
  },
  "es": {
    "nav.features":"Recursos","nav.how":"Cómo funciona","nav.pricing":"Planes","nav.download":"Descargar","nav.getApp":"Obtener la app",
    "hero.title":"Pérdida de peso que se adapta a tu rutina","hero.subtitle":"Planes personalizados, micro-hábitos y seguimiento inteligente — sincroniza con Apple Health o Google Fit.","hero.ctaPrimary":"Descargar ahora","hero.ctaSecondary":"Cómo funciona","hero.trust1":"✔ Personalización según tu historial","hero.trust2":"✔ Integración con wearables","hero.trust3":"✔ Privacidad y seguridad de datos",
    "features.title":"La herramienta completa para perder peso","features.subtitle":"Funciones diseñadas para acompañar tus metas — con ciencia y simplicidad.",
    "features.personalized":"Plan personalizado","features.personalizedDesc":"Planes nutricionales y objetivos basados en tus datos, ajustándose automáticamente a medida que progresas.",
    "features.microhabits":"Micro-hábitos","features.microhabitsDesc":"Hábitos diarios fáciles de seguir que se acumulan en grandes resultados con el tiempo.",
    "features.quickLog":"Registro rápido de comidas","features.quickLogDesc":"Entrada rápida, escáner de códigos de barras y base de datos de alimentos fiable.",
    "features.sync":"Sincroniza con tus dispositivos","features.syncDesc":"Compatible con Apple Health, Google Fit y muchos wearables para métricas automáticas.",
    "features.progress":"Progreso visual","features.progressDesc":"Gráficas de peso, objetivos y cohortes—fácil ver el avance.",
    "features.security":"Protección de datos","features.securityDesc":"Cifrado, políticas claras de privacidad y opciones para exportar/eliminar tus datos.",
    "how.title":"Cómo funciona","how.step1":"<strong>Onboarding rápido:</strong> responde un breve cuestionario.","how.step2":"<strong>Plan inicial:</strong> objetivos de calorías y micro-hábitos.","how.step3":"<strong>Registra y sincroniza:</strong> registra comidas o conecta tu wearable.","how.step4":"<strong>Retroalimentación diaria:</strong> notificaciones y recomendaciones adaptativas.",
    "pricing.title":"Planes","pricing.subtitle":"Comienza gratis. Actualiza cuando quieras.","pricing.free":"Gratis","pricing.free1":"Plan básico","pricing.free2":"Registro de comidas","pricing.free3":"Seguimiento de peso","pricing.startFree":"Comenzar gratis",
    "pricing.premium":"Premium","pricing.premium1":"Todo en Gratis","pricing.premium2":"Planes personalizados","pricing.premium3":"Sincronización avanzada","pricing.subscribe":"Suscribirse Premium",
    "pricing.coaching":"Coaching","pricing.contact":"Consultar precio","pricing.coaching1":"Coach dedicado","pricing.coaching2":"Plan alimenticio y de entrenamiento","pricing.coaching3":"Sesiones semanales","pricing.contactBtn":"Quiero más info",
    "testimonials.title":"Qué dicen los usuarios",
    "download.title":"¿Listo para empezar?","download.subtitle":"Descarga Shape+ y comienza tu viaje sostenible de pérdida de peso — disponible en iOS y Android.","download.beta":"¿Prefieres beta? Regístrate aquí",
    "lead.title":"Recibe el enlace de descarga","lead.send":"Enviar enlace","lead.note":"Enviaremos el enlace de descarga y novedades a tu correo.",
    "modal.title":"¿Cómo quieres obtener la app?","modal.subtitle":"Elige tu plataforma — serás redirigido a la tienda o recibirás instrucciones para el APK.",
    "footer.privacy":"Privacidad","footer.terms":"Términos","footer.contact":"Contacto"
  }
};

document.addEventListener('DOMContentLoaded', function(){
  // set year
  document.getElementById('year').textContent = new Date().getFullYear();

  // mobile menu
  const hamburger = document.getElementById('hamburger');
  const mobileMenu = document.getElementById('mobileMenu');
  hamburger && hamburger.addEventListener('click', () => {
    mobileMenu.classList.toggle('show');
  });

  // modal
  const downloadBtn = document.getElementById('downloadBtn');
  const downloadModal = document.getElementById('downloadModal');
  const modalClose = document.getElementById('modalClose');
  downloadBtn && downloadBtn.addEventListener('click', (e) => { e.preventDefault(); openModal(); });
  modalClose && modalClose.addEventListener('click', closeModal);
  downloadModal && downloadModal.addEventListener('click', (e) => { if(e.target === downloadModal) closeModal(); });

  // language
  const langSelect = document.getElementById('langSelect');
  langSelect.value = navigator.language.startsWith('es') ? 'es' : (navigator.language.startsWith('en') ? 'en' : 'pt-BR');
  applyLanguage(langSelect.value);
  langSelect.addEventListener('change', (e)=> applyLanguage(e.target.value));

  // modal links (placeholders)
  document.getElementById('modalAppStore').href = "#";
  document.getElementById('modalPlayStore').href = "#";
  document.getElementById('modalApk').addEventListener('click', function(e){
    e.preventDefault();
    const email = prompt("Digite seu e-mail para receber o link do APK:");
    if(email && validateEmail(email)) {
      alert("Obrigado! Enviaremos o link para: " + email);
    }
  });

  // beta link
  document.getElementById('betaLink').addEventListener('click', function(e){
    e.preventDefault();
    document.getElementById('email').focus();
    window.location.hash = "#download";
  });
});

function openModal(){ document.getElementById('downloadModal').setAttribute('aria-hidden','false'); }
function closeModal(){ document.getElementById('downloadModal').setAttribute('aria-hidden','true'); }
function validateEmail(email){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email); }
function submitLead(e){
  e.preventDefault();
  const email = document.getElementById('email').value;
  const platform = document.getElementById('platform').value;
  if(!validateEmail(email)){ alert('Digite um e-mail válido.'); return false; }
  alert(`Obrigado! Em breve enviaremos o link de download para ${email} (${platform}).`);
  e.target.reset();
  return false;
}

function applyLanguage(lang){
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const key = el.getAttribute('data-i18n');
    if(i18n[lang] && i18n[lang][key]) {
      if(el.tagName.toLowerCase() === 'input' || el.tagName.toLowerCase() === 'textarea') {
        el.placeholder = i18n[lang][key];
      } else {
        el.innerHTML = i18n[lang][key];
      }
    }
  });
}
